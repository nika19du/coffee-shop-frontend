<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coffee Shop</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/png"  href="images/coffee-logo.png"  >
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.2/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css"/>
    <script src="https://kit.fontawesome.com/2c17b0523e.js" crossorigin="anonymous"></script>
   </head>
  <body>
    <h1 class="heading">your <span>ORDER</span></h1>
    <main>
    <section class="orderInfo">
      <p id="dataInfo">
      </p>
    </section>
    <section>
      <form action="https://formsubmit.co/qnkovanikol29@gmail.com" method="POST" id="myForm" class="orderForm">
        <input type="hidden" name="_subject" value="New submission!">
        <input class="name" type="text" name="clientName" placeholder="Name..." required>
        <input class="email" type="email" name="clientEmail" placeholder="Email..."required> 
        <input type="number" class="number" name="clientPhone"  minlength="10" maxlength="10" placeholder="Phone..." required title="Please enter exactly 10 digits">
        <input class="address" type="address" name="clientAddres" placeholder="Address..."required>
          <select name="paymentMethod" id="payment">
            <optgroup label="Payment method">
              <option value="card">Card</option>
              <option value="cash">Cash</option>
            </optgroup>
        <textarea class="msg" name="clientComment" id="" cols="5" rows="5" placeholder="Comment to order"></textarea>
        <input type="hidden" name="_next" value="https://nika19du.github.io/coffee-shop-frontend/#home">
        <button type="submit "onclick="Congrats()">Send</button>
      </form>
    </section>
  </main>
    <script>
        const form=document.querySelector('.orderForm');
       // let res=JSON.parse(localStorage.getItem("items"));
        let info=document.getElementById('dataInfo');
        let totalPrice=0;
     //   console.log(res);
        //  res.map(data=>{
        //     info.innerHTML+=`<strong><i>Order number: <i></strong> ${data.no} <br/> <strong><i>Product:</i></strong> `+data.name+' '+`<span>$${data.price}</span><br/>`;
        //     totalPrice+=data.price;
        // });
        let res=JSON.parse(localStorage.getItem('items')).map(data=>{
          info.innerHTML+=`<strong><i>Order number: <i></strong> ${data.id} <br/> <strong><i>Product:</i></strong> `+data.name+` | quantity: ${data.no} for `+`<span>$${data.price}</span><br/>`;
          totalPrice+=parseFloat(data.price);
      });
        const name=document.querySelector('.name'),
              email=document.querySelector('.email'),
              number=document.querySelector('.number'),
              address=document.querySelector('.address'),
              payment=document.getElementById('payment').value,
              msg=document.querySelector('.msg');
        
        const myForm = document.getElementById('myForm');
        // Add a listener to the submit event
        myForm.addEventListener('submit', function (e) {
            const errors = []; 
            // Check inputs... 
            if(errors.length) {
                e.preventDefault(); // The browser will not make the HTTP POST request
                return;
            }
            const time = Date.now();
            const today = new Date(time);
            alert(`Congrats for ordering ${name.value}! With total price $${totalPrice}.\nOrder Detail: *payment-${payment} *address-${address.value}\n${today}`);
           localStorage.clear();
        }); 

    </script>
    </script>
  </body>
</html>